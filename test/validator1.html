<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link type="text/css" href="../plugin/magica/core.css" rel="stylesheet"/>
<script type="text/javascript" src="../plugin/magica/core.js"></script>
<script type="text/javascript">

function assertValidatorValid(validator, values)
{
	for(var value of values) {
		var message = validator.validate(value, "CAPTION");
		if(message == null) {
			console.log("SUCCESS", validator, value);
		} else {
			console.error("FAIL", validator, value, message);
		}
	}
}
function assertValidatorInvalid(validator, values)
{
	for(var value of values) {
		var message = validator.validate(value, "CAPTION");
		if(message != null) {
			console.log("SUCCESS", validator, value, message);
		} else {
			console.error("FAIL", validator, value);
		}
	}
}

/**
 * NumberValidator TEST
 */
assertValidatorValid(new mg.NumberValidator(), [
	"0",
	"123",
	"456789",
	"4567890123",
	"012345679", 
	"9876543210", 
	"98765432109876543210987654321098765432109876543210",
	"9876543210987654321098765432109876543210987654321012345678998765432109876543210987654321098765432109876543210123456789",
	"+0",
	"+123",
	"+456789",
	"+4567890123",
	"+012345679", 
	"+9876543210", 
	"+98765432109876543210987654321098765432109876543210",
	"+9876543210987654321098765432109876543210987654321012345678998765432109876543210987654321098765432109876543210123456789",
	"-0",
	"-123",
	"-456789",
	"-4567890123",
	"-012345679", 
	"-9876543210", 
	"-98765432109876543210987654321098765432109876543210",
	"-9876543210987654321098765432109876543210987654321012345678998765432109876543210987654321098765432109876543210123456789",]);

assertValidatorInvalid(new mg.NumberValidator(), [
	"a",
	"1b3",
	"45c789",
	"4567d90123",
	"01234e679", 
	"987654f210", 
	"9876543g109876543210987654321098765432109876543210",
	"98765432098765432109876543210987654321098765432101234567899h8765432109876543210987654321098765432109876543210123456789",
	"+a",
	"+1b3",
	"+45c789",
	"+4567d90123",
	"+01234e679", 
	"+987654f210", 
	"+9876543g109876543210987654321098765432109876543210",
	"+98765432098765432109876543210987654321098765432101234567899h8765432109876543210987654321098765432109876543210123456789",
	"-a",
	"-1b3",
	"-45c789",
	"-4567d90123",
	"-01234e679", 
	"-987654f210", 
	"-9876543g109876543210987654321098765432109876543210",
	"-98765432098765432109876543210987654321098765432101234567899h8765432109876543210987654321098765432109876543210123456789",
	"--1234567890",
	"++1234567890",
	"1+2345",
	"1-2345"]);

assertValidatorValid(new mg.NumberValidator(4), [
	"0",
	"123",
	"1234",
	"9874",
	"7654",
	"72",
	"-0",
	"-123",
	"-1234",
	"-9874",
	"-7654",
	"-72",
	"+0",
	"+123",
	"+1234",
	"+9874",
	"+7654",
	"+72",]);
assertValidatorInvalid(new mg.NumberValidator(4), [
	"0.",
	"123.0",
	"1234.1",
	"9874.9",
	"7654.7894",
	"12345",
	"+0.",
	"+123.0",
	"+1234.1",
	"+9874.9",
	"+7654.7894",
	"+12345",
	"-0.",
	"-123.0",
	"-1234.1",
	"-9874.9",
	"-7654.7894",
	"-12345",
	"-a",
	"--0",
	"+a",
	"++a",
	"+1-",]);
assertValidatorValid(new mg.NumberValidator(null, 5), [
	"0.01234",
	"0.56789",
	"0.1234",
	"0.333",
	"0.14",
	"0.9",
	"0",
	"1.01234",
	"2.56789",
	"3.1234",
	"4.333",
	"5.14",
	"6.9",
	"7",
	"21.01234",
	"32.56789",
	"43.1234",
	"54.333",
	"65.14",
	"76.9",
	"87",
	"921.01234",
	"6132.56789",
	"1103.1234",
	"45354.333",
	"9565.14",
	"1676.9",
	"888888888787",
	"777921.01234",
	"895646132.56789",
	"31364241103.1234",
	"478915212345354.333",
	"49815612339565.14",
	"99999999999999999999999178912345678917891234567891676.9",
	"123456789123456789123456789123456789187",
	"+0.01234",
	"+0.56789",
	"+0.1234",
	"+0.333",
	"+0.14",
	"+0.9",
	"+0",
	"+1.01234",
	"+2.56789",
	"+3.1234",
	"+4.333",
	"+5.14",
	"+6.9",
	"+7",
	"+21.01234",
	"+32.56789",
	"+43.1234",
	"+54.333",
	"+65.14",
	"+76.9",
	"+87",
	"+921.01234",
	"+6132.56789",
	"+1103.1234",
	"+45354.333",
	"+9565.14",
	"+1676.9",
	"+888888888787",
	"+777921.01234",
	"+895646132.56789",
	"+31364241103.1234",
	"+478915212345354.333",
	"+49815612339565.14",
	"+99999999999999999999999178912345678917891234567891676.9",
	"+123456789123456789123456789123456789187",
	"-0.01234",
	"-0.56789",
	"-0.1234",
	"-0.333",
	"-0.14",
	"-0.9",
	"-0",
	"-1.01234",
	"-2.56789",
	"-3.1234",
	"-4.333",
	"-5.14",
	"-6.9",
	"-7",
	"-21.01234",
	"-32.56789",
	"-43.1234",
	"-54.333",
	"-65.14",
	"-76.9",
	"-87",
	"-921.01234",
	"-6132.56789",
	"-1103.1234",
	"-45354.333",
	"-9565.14",
	"-1676.9",
	"-888888888787",
	"-777921.01234",
	"-895646132.56789",
	"-31364241103.1234",
	"-478915212345354.333",
	"-49815612339565.14",
	"-99999999999999999999999178912345678917891234567891676.9",
	"-123456789123456789123456789123456789187",]);

assertValidatorInvalid(new mg.NumberValidator(null, 5), [
	"0.123456789",
	"0.1234567",
	"0.012345",
	"1234567891.123567",
	"+0.123456789",
	"+0.1234567",
	"+0.012345",
	"+1234567891.123567",
	"-0.123456789",
	"-0.1234567",
	"-0.012345",
	"-1234567891.123567",
	"a",
	"+a",
	"-a",
	"-123456789-",
	"-1234-56789",
	"+123456789+",
	"+1234+56789",]);
assertValidatorValid(new mg.NumberValidator(5, 2), [
	"0.01",
	"0.12",
	"0.34",
	"0.56",
	"0.78",
	"0.90",
	"0.1",
	"0.2",
	"0.9",
	"0",
	"7",
	"1.01",
	"12.12",
	"123.34",
	"1234.56",
	"12345.78",
	"4567.90",
	"8901.1",
	"333.2",
	"22.9",
	"1",
	"999",
	"+0.01",
	"+0.12",
	"+0.34",
	"+0.56",
	"+0.78",
	"+0.90",
	"+0.1",
	"+0.2",
	"+0.9",
	"+0",
	"+7",
	"+1.01",
	"+12.12",
	"+123.34",
	"+1234.56",
	"+12345.78",
	"+4567.90",
	"+8901.1",
	"+333.2",
	"+22.9",
	"+1",
	"+999",
	"-0.01",
	"-0.12",
	"-0.34",
	"-0.56",
	"-0.78",
	"-0.90",
	"-0.1",
	"-0.2",
	"-0.9",
	"-0",
	"-7",
	"-1.01",
	"-12.12",
	"-123.34",
	"-1234.56",
	"-12345.78",
	"-4567.90",
	"-8901.1",
	"-333.2",
	"-22.9",
	"-1",
	"-999",]);
assertValidatorInvalid(new mg.NumberValidator(5, 2), [
	"0.123",
	"123456",
	"123456.789",
	"z",
	"zzzzz",
	"123456z",
	"123456z1240988",
	"+0.123",
	"+123456",
	"+123456.789",
	"+z",
	"+zzzzz",
	"+123456z",
	"+123456z1240988",
	"-0.123",
	"-123456",
	"-123456.789",
	"-z",
	"-zzzzz",
	"-123456z",
	"-123456z1240988",
	"123-",
	"123+",
	"123+12",
	"123-12",
	"123.013",
]);

/**
 * MaxValidator TEST
 */
assertValidatorValid(new mg.MaxValidator(100), ["100","99","98","0","+100","+99","+98","+0","-100","-100000"]);
assertValidatorInvalid(new mg.MaxValidator(100), ["101","100.0001"]);

/**
 * MinValidator TEST
 */
assertValidatorValid(new mg.MinValidator(100), ["100", "101","100.0001", "+100", "+101","+100.0001"]);
assertValidatorInvalid(new mg.MinValidator(100), ["99","98","0","+99","+98","+0","-100","-100000"]);

/**
 * YearMonthValidator TEST
 */
assertValidatorValid(new mg.YearMonthValidator(), ["2017-10", "2017-12", "2017-1", "123-1", "2017/10", "2017/12", "2017/1", "123/1"]);
assertValidatorInvalid(new mg.YearMonthValidator(), ["a", "yyyy-MM", "yyyy/MM", "--", "/0/0", "2017-0", "2017/13"]);

/**
 * DateValidator TEST
 */
assertValidatorValid(new mg.DateValidator(), ["2017-10-01", "2017-12-31", "2017-01-9", "123-9-09", "123-9-9", "2017/10/01", "2017/12/31", "2017/01/9", "123/9/09", "123/9/9",]);
assertValidatorInvalid(new mg.DateValidator(), ["a", "yyyy-MM-dd", "yyyy/MM/dd", "--", "/0/0", "2017-0", "2017/13", "2017/13/01", "2017/1/00"]);


/**
 * TimeValidator TEST
 */
assertValidatorValid(new mg.TimeValidator(mg.TimeValidator.MINUTE), ["01:40", "12:30", "23:59", "0:0", "3:2", "03:2", "3:20"]);
assertValidatorInvalid(new mg.TimeValidator(mg.TimeValidator.MINUTE), ["101:30","10:301", "10:30:20", "a", "yyyy-MM-dd", "yyyy/MM/dd", "--", "/0/0", "2017-0", "2017/13", "2017/13/01", "2017/1/00"]);

assertValidatorValid(new mg.TimeValidator(mg.TimeValidator.SECOND), ["01:40:20", "12:30:0", "23:59:59", "0:0:12", "3:2:1", "03:2:12", "3:20:1"]);
assertValidatorInvalid(new mg.TimeValidator(mg.TimeValidator.SECOND), ["011:40:20", "01:402:20", "01:40:204", "a", "yyyy-MM-dd", "yyyy/MM/dd", "--", "/0/0", "2017-0", "2017/13", "2017/13/01", "2017/1/00"]);

/**
 * DateTimeValidator TEST
 */
assertValidatorValid(new mg.DateTimeValidator(mg.TimeValidator.MINUTE), ["2001-10-03 01:40", "2001-10-03   12:30", "2001-1-03 23:59", "2001-1-3    0:0", "421-1-03   3:2", "421-1-03 03:2", "421-1-03T3:20"]);
assertValidatorInvalid(new mg.DateTimeValidator(mg.TimeValidator.MINUTE), ["2001-10-03", "12001-10-03 12:10", "2001-101-03 12:10", "2001-10-032 12:10", "2001-10-03 112:10", "2001-10-03 12:101","101:30","10:301", "10:30:20", "a", "yyyy-MM-dd", "yyyy/MM/dd", "--", "/0/0", "2017-0", "2017/13", "2017/13/01", "2017/1/00"]);

 assertValidatorValid(new mg.DateTimeValidator(mg.TimeValidator.SECOND), ["2001-10-03 01:40:20", "2001-10-03   12:30:0", "2001-10-03    23:59:59", "2001-10-1 0:0:12", "2001-3-1 3:2:1", "333-12-01 03:2:12", "2017/12/30 3:20:1"]);
assertValidatorInvalid(new mg.DateTimeValidator(mg.TimeValidator.SECOND), ["011:40:20", "01:402:20", "01:40:204", "a", "yyyy-MM-dd", "yyyy/MM/dd", "--", "/0/0", "2017-0", "2017/13", "2017/13/01", "2017/1/00"]);

/**
 * MailAddressValidator TEST
 */
assertValidatorValid(new mg.MailAddressValidator(), ["example@example.co.jp", "example012345679@012345679example.co.jp", "e-_xample012345679@012345679-_example.co.jp"]);
assertValidatorInvalid(new mg.MailAddressValidator(), ["101","100.0001","example"]);

var formValidator = null;
window.addEventListener('load', function(e) {
	formValidator = new mg.FormValidator(document.forms["test1"]);

});

</script>
</head>
<body>
	<form id="test1">
		<input type="text" name="numberField1" validate="required(),number(18,4),min(-10),max(100000000)"/><br/>
		<input type="text" name="numberField2" validate="required(),number(18)"/><br/>
		<input type="text" name="numberField3" validate="required(),number(9)"/><br/>
		<input type="text" name="numberField4" validate="number(4,4)"/><br/>
	</form>
</body>
</html>
